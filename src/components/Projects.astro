---
// Projects.astro
const projects = [
  {
    title: "NEURAL FINANCE",
    category: "Fintech Core",
    description: "A decentralized trading platform powered by predictive AI models. Micro-second latency for high-frequency execution.",
    tech: ["Rust", "React", "Solana"],
    image: "https://images.unsplash.com/photo-1639762681485-074b7f938ba0?q=80&w=2832&auto=format&fit=crop" 
  },
  {
    title: "AETHER HEALTH",
    category: "MedTech Interface",
    description: "HIPAA-compliant patient portal with real-time biometric visualization and secure data tunnels.",
    tech: ["Next.js", "Python", "AWS"],
    image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?q=80&w=2940&auto=format&fit=crop"
  },
  {
    title: "VOID COMMERCE",
    category: "E-Commerce",
    description: "Headless commerce architecture designed for extreme traffic spikes and immersive 3D product previews.",
    tech: ["Shopify", "Three.js", "Vercel"],
    image: "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2864&auto=format&fit=crop"
  }
];
---

<section class="projects-section">
    <div class="projects-wrapper">
        <div class="header-reveal reveal-on-scroll">
            <h2 class="section-title">DEPLOYED <span class="text-gradient">INCURSIONS</span></h2>
        </div>

        <div class="projects-list">
            {projects.map((project, index) => (
                <article class="project-card reveal-on-scroll">
                    <div class="project-image-container">
                        <img src={project.image} alt={project.title} class="project-img" />
                        <div class="img-overlay"></div>
                    </div>

                    <div class="project-info">
                        <span class="project-cat">/// {project.category}</span>
                        <h3>{project.title}</h3>
                        <p>{project.description}</p>
                        
                        <div class="project-tech">
                            {project.tech.map(t => (
                                <span class="tech-pill">{t}</span>
                            ))}
                        </div>

                        <a href="#" class="view-case-btn">
                            VIEW CASE STUDY <span class="arrow">→</span>
                        </a>
                    </div>
                </article>
            ))}
        </div>
    </div>
</section>

<script>
    const observerOptions = { root: null, rootMargin: '0px', threshold: 0.15 };
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);
    document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));
</script>

<style>
    /* --- ESTRUCTURA --- */
    .projects-section {
        position: relative;
        z-index: 20;
        width: 100%;
        padding: 8rem 1.5rem; /* Aumentamos ligeramente el padding lateral */
        background-color: #050505;
        overflow: hidden;
    }

    .projects-wrapper {
        max-width: 1200px;
        margin: 0 auto;
    }

    .header-reveal { text-align: center; margin-bottom: 6rem; }
    
    .section-title { 
        font-family: 'Outfit', sans-serif; 
        font-size: clamp(2.5rem, 6vw, 3.5rem); 
        font-weight: 700; 
        color: #fff; 
        line-height: 1.1;
    }

    .text-gradient { 
        background: linear-gradient(135deg, #38bdf8 0%, #a78bfa 100%); 
        -webkit-background-clip: text; 
        -webkit-text-fill-color: transparent; 
    }

    /* --- LISTA --- */
    .projects-list {
        display: flex;
        flex-direction: column;
        gap: 8rem;
    }

    .project-card {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 4rem;
        align-items: center;
        opacity: 0; 
        transform: translateY(40px);
        transition: all 1s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    .project-card.is-visible { opacity: 1; transform: translateY(0); }

    /* ZIG-ZAG DESKTOP */
    .project-card:nth-child(even) { direction: rtl; }
    .project-card:nth-child(even) .project-info { direction: ltr; text-align: right; }
    .project-card:nth-child(even) .project-tech { justify-content: flex-end; }
    .project-card:nth-child(even) .view-case-btn { margin-left: auto; }

    /* --- IMAGEN --- */
    .project-image-container {
        position: relative;
        border-radius: 12px;
        overflow: hidden;
        aspect-ratio: 16/9;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: #111;
    }

    .project-img {
        width: 100%; height: 100%; object-fit: cover;
        transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        filter: grayscale(100%) contrast(1.1);
    }

    .img-overlay {
        position: absolute; inset: 0;
        background: rgba(0,0,0,0.4);
        transition: background 0.4s ease;
    }

    .project-image-container:hover .project-img {
        transform: scale(1.05);
        filter: grayscale(0%) contrast(1.1);
    }
    .project-image-container:hover .img-overlay { background: rgba(0,0,0,0); }

    /* --- INFO --- */
    .project-info { display: flex; flex-direction: column; }
    .project-cat { font-family: monospace; color: #38bdf8; font-size: 0.8rem; letter-spacing: 2px; margin-bottom: 1rem; }
    
    h3 { font-family: 'Outfit', sans-serif; font-size: clamp(1.8rem, 4vw, 2.8rem); color: #fff; margin-bottom: 1.5rem; line-height: 1.1; }
    p { color: #94a3b8; font-size: clamp(1rem, 1.5vw, 1.1rem); line-height: 1.6; margin-bottom: 2rem; }

    .project-tech { display: flex; gap: 0.8rem; flex-wrap: wrap; margin-bottom: 2rem; }
    .tech-pill {
        font-family: monospace; font-size: 0.75rem; color: #cbd5e1;
        border: 1px solid rgba(255, 255, 255, 0.1); padding: 0.4rem 1rem; border-radius: 50px;
        background: rgba(255,255,255,0.03);
    }

    .view-case-btn {
        font-family: monospace; font-size: 0.85rem; color: #fff; text-decoration: none;
        display: inline-flex; align-items: center; gap: 10px; transition: color 0.3s ease;
    }
    .view-case-btn:hover { color: #38bdf8; }
    .view-case-btn:hover .arrow { transform: translateX(5px); }
    .arrow { transition: transform 0.3s ease; }

    /* --- RESPONSIVE FIX --- */
    @media (max-width: 1024px) {
        .projects-section { padding: 4rem 1.5rem; }
        .projects-list { gap: 4rem; }
        
        .project-card { 
            grid-template-columns: 1fr; /* Columna única */
            gap: 2rem; 
            direction: ltr !important; /* Forzamos orden normal */
        }

        .project-card:nth-child(even) .project-info { 
            text-align: left; 
        }

        .project-card:nth-child(even) .project-tech { 
            justify-content: flex-start; 
        }

        .project-card:nth-child(even) .view-case-btn { 
            margin-left: 0; 
        }

        .project-image-container {
            aspect-ratio: 4/3; /* Proporción más cómoda en móvil */
        }

        h3 { margin-bottom: 1rem; }
        p { margin-bottom: 1.5rem; }
        .project-tech { margin-bottom: 1.5rem; }
    }
</style>